<docs>
# 哈密顿量构建库

<cite>
**本文档引用的文件**  
- [hamiltonian_builders.py](file://src/tyxonq/applications/chem/chem_libs/hamiltonians_chem_library/hamiltonian_builders.py) - *在最近的提交中修复了重大bug并增强了性能*
- [pyrazine.py](file://src/tyxonq/applications/chem/chem_libs/hamiltonians_chem_library/pyrazine.py)
- [sbm.py](file://src/tyxonq/applications/chem/chem_libs/hamiltonians_chem_library/sbm.py)
- [hamiltonian_building.py](file://examples/hamiltonian_building.py)
- [pauli_io.py](file://src/tyxonq/libs/hamiltonian_encoding/pauli_io.py) - *引入了缓存机制以优化性能*
</cite>

## 更新摘要
**变更内容**   
- 修复了`hamiltonian_builders.py`中的重大bug，影响哈密顿量构建逻辑
- 在`pauli_io.py`中引入了缓存机制，优化了哈密顿量转换性能
- 更新了相关函数的实现细节和性能优化策略
- 增强了源码追踪系统，添加了新修改文件的引用

## 目录
1. [简介](#简介)
2. [核心功能概述](#核心功能概述)
3. [从Hartree-Fock结果提取积分](#从hartree-fock结果提取积分)
4. [哈密顿量算符生成](#哈密顿量算符生成)
5. [统一哈密顿量输出接口](#统一哈密顿量输出接口)
6. [专用分子模型构建器](#专用分子模型构建器)
7. [基准测试应用示例](#基准测试应用示例)

## 简介

哈密顿量构建库提供了一套系统化的工具，用于从量子化学计算结果中构建各类哈密顿量。该库的核心功能围绕PySCF的RHF（限制性Hartree-Fock）对象展开，支持从单双电子积分提取、活性空间定义，到多种物理模型（费米子、自旋-1/2、硬核玻色子）哈密顿量的转换。此外，库中还包含了针对特定分子模型（如吡嗪和自旋-玻色模型）的专用构建器，并提供了在基准测试中的应用示例。

## 核心功能概述

该库的主要功能模块包括：
- **积分提取**：从PySCF的RHF对象中提取单电子积分（`int1e`）、双电子积分（`int2e`）和核心能（`e_core`）
- **哈密顿量转换**：将积分转换为不同表示形式的哈密顿量算符
- **统一输出接口**：支持稀疏矩阵、矩阵乘积算符（MPO）和FCI作用函数三种输出形式
- **专用模型构建**：为特定物理系统提供预定义的哈密顿量构建器

这些功能共同构成了一个完整的量子化学哈密顿量构建流程，适用于从基础研究到实际应用的多种场景。

## 从Hartree-Fock结果提取积分

### 功能说明

`get_integral_from_hf`函数是整个哈密顿量构建流程的起点。它负责从PySCF的RHF对象中提取单电子积分（`int1e`）、双电子积分（`int2e`）和核心能（`e_core`）。该函数支持活性空间（active space）的定义，允许用户指定活性电子数和活性轨道数。

### 活性空间支持

当用户通过`active_space`参数指定活性空间时，函数会创建一个CASCI（完全活性空间自洽场）对象来计算有效积分