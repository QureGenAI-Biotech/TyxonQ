
<!DOCTYPE html>


<html lang="en" data-content_root="../../../" data-theme="auto">

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>tyxonq.libs.optimizer.soap &#8212; TyxonQ 0.1.0 documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "auto";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "auto";
  </script>
  <!--
    this give us a css class that will be invisible only if js is disabled
  -->
  <noscript>
    <style>
      .pst-js-only { display: none !important; }

    </style>
  </noscript>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../../../_static/styles/theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />
<link href="../../../_static/styles/pydata-sphinx-theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />

    <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css?v=8f2a1f02" />
    <link rel="stylesheet" type="text/css" href="../../../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../../../_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="../../../_static/css/custom.css?v=92b9d507" />
    <link rel="stylesheet" type="text/css" href="../../../_static/sphinx-design.min.css?v=95c83b7e" />
    <link rel="stylesheet" type="text/css" href="../../../_static/css/custom.css?v=92b9d507" />
  
  <!-- So that users can add custom icons -->
  <script src="../../../_static/scripts/fontawesome.js?digest=8878045cc6db502f8baf"></script>
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf" />
<link rel="preload" as="script" href="../../../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf" />

    <script src="../../../_static/documentation_options.js?v=38b66d78"></script>
    <script src="../../../_static/doctools.js?v=9bcbadda"></script>
    <script src="../../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../../../_static/copybutton.js?v=fd10adb8"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../../../_static/togglebutton.js?v=4a39c7ea"></script>
    <script src="../../../_static/design-tabs.js?v=f930bc37"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'api/libs/generated/tyxonq.libs.optimizer.soap';</script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="tyxonq.libs.quantum_library" href="tyxonq.libs.quantum_library.html" />
    <link rel="prev" title="tyxonq.libs.optimizer.interop" href="tyxonq.libs.optimizer.interop.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  <meta name="docsearch:version" content="0.1" />
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="auto">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <dialog id="pst-search-dialog">
    
<form class="bd-search d-flex align-items-center"
      action="../../../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
  </dialog>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
<div class="bd-header__inner bd-page-width">
  <button class="pst-navbar-icon sidebar-toggle primary-toggle" aria-label="Site navigation">
    <span class="fa-solid fa-bars"></span>
  </button>
  
  
  <div class="col-lg-3 navbar-header-items__start">
    
      <div class="navbar-item">

  
    
  

<a class="navbar-brand logo" href="../../../index.html">
  
  
  
  
  
  
    <p class="title logo__title">TyxonQ Documentation</p>
  
</a></div>
    
  </div>
  
  <div class="col-lg-9 navbar-header-items">
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
        </div>
      
      
        <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/QureGenAI-Biotech/TyxonQ" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fab fa-github-square fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://pypi.org/project/tyxonq" title="PyPI" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fab fa-python fa-lg" aria-hidden="true"></i>
            <span class="sr-only">PyPI</span></a>
        </li>
</ul></div>
      
        <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
      
        <div class="navbar-item">

<button class="btn btn-sm pst-navbar-icon search-button search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
</button></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
    </div>
  

  
    <button class="pst-navbar-icon sidebar-toggle secondary-toggle" aria-label="On this page">
      <span class="fa-solid fa-outdent"></span>
    </button>
  
</div>

    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <dialog id="pst-primary-sidebar-modal"></dialog>
      <div id="pst-primary-sidebar" class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/QureGenAI-Biotech/TyxonQ" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fab fa-github-square fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://pypi.org/project/tyxonq" title="PyPI" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fab fa-python fa-lg" aria-hidden="true"></i>
            <span class="sr-only">PyPI</span></a>
        </li>
</ul></div>
        
          <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
        
          <div class="navbar-item">

<button class="btn btn-sm pst-navbar-icon search-button search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
</button></div>
        
      </div>
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
<nav class="bd-docs-nav bd-links"
     aria-label="Section Navigation">
  <p class="bd-links__title" role="heading" aria-level="1">Section Navigation</p>
  <div class="bd-toc-item navbar-nav"><ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../core/index.html">Core API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../compiler/index.html">Compiler API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../devices/index.html">Devices API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../numerics/index.html">Numerics API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../postprocessing/index.html">Postprocessing API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../applications/index.html">Applications API</a></li>
<li class="toctree-l1 current active has-children"><a class="reference internal" href="../index.html">Libs API</a><details open="open"><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul class="current">
<li class="toctree-l2 current active"><a class="reference internal" href="tyxonq.libs.html">tyxonq.libs</a></li>
</ul>
</details></li>
<li class="toctree-l1"><a class="reference internal" href="../../cloud/index.html">Cloud API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../utils/index.html">Utils API</a></li>
</ul>
</div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
      <div class="sidebar-primary-item">
<div
    id="pst-page-navigation-heading-3"
    class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
  </div>
  <nav class="bd-toc-nav page-toc" aria-labelledby="pst-page-navigation-heading-3">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#tyxonq.libs.optimizer.soap"><code class="docutils literal notranslate"><span class="pre">soap()</span></code></a></li>
</ul>
  </nav></div>
  </div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">

<nav aria-label="Breadcrumb" class="d-print-none">
  <ul class="bd-breadcrumbs">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="../../../index.html" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    
    <li class="breadcrumb-item"><a href="../../index.html" class="nav-link">API Reference</a></li>
    
    
    <li class="breadcrumb-item"><a href="../index.html" class="nav-link">Libs API</a></li>
    
    
    <li class="breadcrumb-item"><a href="tyxonq.libs.html" class="nav-link">tyxonq.libs</a></li>
    
    
    <li class="breadcrumb-item"><a href="tyxonq.libs.optimizer.html" class="nav-link">tyxonq.libs.optimizer</a></li>
    
    <li class="breadcrumb-item active" aria-current="page"><span class="ellipsis">tyxonq.libs.optimizer.soap</span></li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="tyxonq-libs-optimizer-soap">
<h1>tyxonq.libs.optimizer.soap<a class="headerlink" href="#tyxonq-libs-optimizer-soap" title="Link to this heading">#</a></h1>
<dl class="py function">
<dt class="sig sig-object py" id="tyxonq.libs.optimizer.soap">
<span class="sig-prename descclassname"><span class="pre">tyxonq.libs.optimizer.</span></span><span class="sig-name descname"><span class="pre">soap</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fun</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">x0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">args</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">()</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">u</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">maxfev</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2000</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">atol</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.001</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">callback</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ret_traj</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/tyxonq/libs/optimizer/soap.html#soap"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tyxonq.libs.optimizer.soap" title="Link to this definition">#</a></dt>
<dd><p>Sequential Optimization with Approximate Parabola (SOAP) optimizer.</p>
<p>SOAP is a lightweight, gradient-free optimization algorithm specifically designed
for quantum variational algorithms. It combines parabolic line search with
adaptive direction selection, making it robust to measurement noise and
suitable for optimizing noisy objective functions common in quantum computing.</p>
<dl class="simple">
<dt>Algorithm Overview:</dt><dd><p>SOAP operates by performing sequential one-dimensional optimizations along
carefully selected directions. For each direction, it fits a parabolic model
to function evaluations and moves to the predicted minimum. The algorithm
dynamically adapts its search directions based on optimization progress,
occasionally testing promising average directions from recent iterations.</p>
</dd>
<dt>Key Features:</dt><dd><ul class="simple">
<li><p><strong>Gradient-free</strong>: No gradient information required</p></li>
<li><p><strong>Noise-robust</strong>: Effective with noisy function evaluations</p></li>
<li><p><strong>Adaptive directions</strong>: Learns good search directions during optimization</p></li>
<li><p><strong>Parabolic modeling</strong>: Uses second-order approximations for efficiency</p></li>
<li><p><strong>SciPy compatible</strong>: Integrates seamlessly with scipy.optimize</p></li>
</ul>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>fun</strong> (<em>Callable</em>) – Objective function to minimize. Should accept a parameter
vector and optional arguments, returning a scalar value.</p></li>
<li><p><strong>x0</strong> (<em>ndarray</em>) – Initial parameter guess. The optimization starts from this point.</p></li>
<li><p><strong>args</strong> (<em>Tuple</em><em>, </em><em>optional</em>) – Additional arguments to pass to the objective function.
Default is empty tuple.</p></li>
<li><p><strong>u</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.14)"><em>float</em></a><em>, </em><em>optional</em>) – Step size parameter controlling the scale of line searches.
Larger values explore more aggressively but may overshoot minima.
Default 0.1.</p></li>
<li><p><strong>maxfev</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.14)"><em>int</em></a><em>, </em><em>optional</em>) – Maximum number of function evaluations allowed.
Algorithm terminates when this limit is reached. Default 2000.</p></li>
<li><p><strong>atol</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.14)"><em>float</em></a><em>, </em><em>optional</em>) – Absolute tolerance for convergence detection.
Algorithm stops when average function value improvement over recent
iterations falls below this threshold. Default 1e-3.</p></li>
<li><p><strong>callback</strong> (<em>Callable</em><em>, </em><em>optional</em>) – Optional callback function called after each
iteration with the current parameter vector. Useful for monitoring
progress or logging. Default None.</p></li>
<li><p><strong>ret_traj</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.14)"><em>bool</em></a><em>, </em><em>optional</em>) – If True, include the full optimization trajectory
in the result. Useful for analysis but increases memory usage. Default False.</p></li>
<li><p><strong>**kwargs</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.14)"><em>Any</em></a>) – Additional keyword arguments (ignored for compatibility).</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><dl class="simple">
<dt>Optimization result object containing:</dt><dd><ul class="simple">
<li><p>x (ndarray): Final optimized parameter vector</p></li>
<li><p>fun (float): Final objective function value</p></li>
<li><p>nit (int): Number of iterations performed</p></li>
<li><p>nfev (int): Total number of function evaluations</p></li>
<li><p>success (bool): Always True (algorithm-specific)</p></li>
<li><p>fun_list (ndarray): Function values at each iteration</p></li>
<li><p>nfev_list (ndarray): Cumulative function evaluations at each iteration</p></li>
<li><p>trajectory (ndarray, optional): Full parameter trajectory (if ret_traj=True)</p></li>
</ul>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>OptimizeResult</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># Basic usage with a simple quadratic function</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span><span class="w"> </span><span class="nf">quadratic</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">((</span><span class="n">x</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span>  <span class="c1"># Minimum at x = [1, 1, ...]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x0</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">result</span> <span class="o">=</span> <span class="n">soap</span><span class="p">(</span><span class="n">quadratic</span><span class="p">,</span> <span class="n">x0</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Optimized parameters: </span><span class="si">{</span><span class="n">result</span><span class="o">.</span><span class="n">x</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Final value: </span><span class="si">{</span><span class="n">result</span><span class="o">.</span><span class="n">fun</span><span class="si">:</span><span class="s2">.6f</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Converged in </span><span class="si">{</span><span class="n">result</span><span class="o">.</span><span class="n">nit</span><span class="si">}</span><span class="s2"> iterations&quot;</span><span class="p">)</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># VQE energy minimization with SOAP</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span><span class="w"> </span><span class="nf">vqe_energy</span><span class="p">(</span><span class="n">params</span><span class="p">,</span> <span class="n">circuit_func</span><span class="p">,</span> <span class="n">hamiltonian</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">circuit</span> <span class="o">=</span> <span class="n">circuit_func</span><span class="p">(</span><span class="n">params</span><span class="p">)</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="n">circuit</span><span class="o">.</span><span class="n">expectation_value</span><span class="p">(</span><span class="n">hamiltonian</span><span class="p">,</span> <span class="n">shots</span><span class="o">=</span><span class="mi">1024</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Initial guess for variational parameters</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">theta0</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">(</span><span class="n">n_params</span><span class="p">)</span> <span class="o">*</span> <span class="mf">0.1</span>
<span class="gp">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Optimize with custom tolerance and callback</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span><span class="w"> </span><span class="nf">progress_callback</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
<span class="gp">... </span>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Current energy: </span><span class="si">{</span><span class="n">vqe_energy</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">circuit_func</span><span class="p">,</span><span class="w"> </span><span class="n">hamiltonian</span><span class="p">)</span><span class="si">:</span><span class="s2">.6f</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">result</span> <span class="o">=</span> <span class="n">soap</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">vqe_energy</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">theta0</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">args</span><span class="o">=</span><span class="p">(</span><span class="n">circuit_func</span><span class="p">,</span> <span class="n">hamiltonian</span><span class="p">),</span>
<span class="gp">... </span>    <span class="n">u</span><span class="o">=</span><span class="mf">0.05</span><span class="p">,</span>  <span class="c1"># Smaller steps for quantum circuits</span>
<span class="gp">... </span>    <span class="n">maxfev</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">atol</span><span class="o">=</span><span class="mf">1e-4</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">callback</span><span class="o">=</span><span class="n">progress_callback</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">ret_traj</span><span class="o">=</span><span class="kc">True</span>  <span class="c1"># Keep trajectory for analysis</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">optimal_energy</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="n">fun</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">optimal_params</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="n">x</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">convergence_history</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="n">fun_list</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># Integration with scipy.optimize.minimize</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">scipy.optimize</span><span class="w"> </span><span class="kn">import</span> <span class="n">minimize</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">result</span> <span class="o">=</span> <span class="n">minimize</span><span class="p">(</span><span class="n">vqe_energy</span><span class="p">,</span> <span class="n">theta0</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="n">soap</span><span class="p">,</span>
<span class="gp">... </span>                  <span class="n">args</span><span class="o">=</span><span class="p">(</span><span class="n">circuit_func</span><span class="p">,</span> <span class="n">hamiltonian</span><span class="p">),</span>
<span class="gp">... </span>                  <span class="n">options</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;u&#39;</span><span class="p">:</span> <span class="mf">0.05</span><span class="p">,</span> <span class="s1">&#39;maxfev&#39;</span><span class="p">:</span> <span class="mi">1000</span><span class="p">})</span>
</pre></div>
</div>
<dl class="simple">
<dt>Algorithm Details:</dt><dd><dl class="simple">
<dt><strong>Direction Selection</strong>:</dt><dd><ol class="arabic simple">
<li><p>Initially optimizes along coordinate directions (sorted by parameter magnitude)</p></li>
<li><p>After cycling through all directions, tests “average directions” from recent progress</p></li>
<li><p>Uses Powell’s criterion to decide whether to add promising new directions</p></li>
</ol>
</dd>
<dt><strong>Line Search</strong>:</dt><dd><ol class="arabic simple">
<li><p>Evaluates function at {-u, 0, +u} along the current direction</p></li>
<li><p>If minimum is at boundary, extends search to {-4u, -u, 0, +u} or {-u, 0, +u, +4u}</p></li>
<li><p>Fits parabola to the evaluations and moves to predicted minimum</p></li>
<li><p>Falls back to best sampled point if parabolic prediction is unreliable</p></li>
</ol>
</dd>
<dt><strong>Convergence</strong>:</dt><dd><ul class="simple">
<li><p>Stops when average improvement over recent iterations &lt; atol</p></li>
<li><p>Or when maximum function evaluations (maxfev) is reached</p></li>
<li><p>Uses rolling window of length 2×n_params for convergence assessment</p></li>
</ul>
</dd>
</dl>
</dd>
<dt>Performance Notes:</dt><dd><ul class="simple">
<li><p><strong>Function evaluation budget</strong>: Typically uses 3-7 evaluations per iteration</p></li>
<li><p><strong>Scaling</strong>: Performance degrades gracefully with parameter count</p></li>
<li><p><strong>Noise tolerance</strong>: Robust to shot noise and measurement errors</p></li>
<li><p><strong>Memory usage</strong>: O(n_params) storage, O(n_iterations) if ret_traj=True</p></li>
</ul>
</dd>
<dt>Comparison with Other Optimizers:</dt><dd><ul class="simple">
<li><p><strong>vs. COBYLA</strong>: Better convergence for smooth functions, fewer evaluations</p></li>
<li><p><strong>vs. Nelder-Mead</strong>: More systematic direction selection, better for high dimensions</p></li>
<li><p><strong>vs. L-BFGS-B</strong>: No gradient required, better for noisy functions</p></li>
<li><p><strong>vs. SPSA</strong>: Deterministic behavior, more predictable convergence</p></li>
</ul>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p>scipy.optimize.minimize: Standard optimization interface.
tyxonq.libs.optimizer.interop: Integration utilities for scipy.
tyxonq.applications.chem.algorithms: VQE and other variational algorithms.</p>
</div>
<p class="rubric">References</p>
<p>SOAP algorithm design is inspired by Powell’s method and parabolic interpolation
techniques, adapted for the specific challenges of quantum variational optimization.</p>
</dd></dl>

</section>


                </article>
              
              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="tyxonq.libs.optimizer.interop.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">tyxonq.libs.optimizer.interop</p>
      </div>
    </a>
    <a class="right-next"
       href="tyxonq.libs.quantum_library.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">tyxonq.libs.quantum_library</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <dialog id="pst-secondary-sidebar-modal"></dialog>
                <div id="pst-secondary-sidebar" class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
<div
    id="pst-page-navigation-heading-4"
    class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
  </div>
  <nav class="bd-toc-nav page-toc" aria-labelledby="pst-page-navigation-heading-4">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#tyxonq.libs.optimizer.soap"><code class="docutils literal notranslate"><span class="pre">soap()</span></code></a></li>
</ul>
  </nav></div>

  <div class="sidebar-secondary-item">
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../../../_sources/api/libs/generated/tyxonq.libs.optimizer.soap.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script defer src="../../../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf"></script>
<script defer src="../../../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item">

  <p class="copyright">
    
      © Copyright 2025, QureGenAI Biotech.
      <br/>
    
  </p>
</div>
      
        <div class="footer-item">

  <p class="sphinx-version">
    Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 8.1.3.
    <br/>
  </p>
</div>
      
    </div>
  
  
  
    <div class="footer-items__end">
      
        <div class="footer-item">
<p class="theme-version">
  <!-- # L10n: Setting the PST URL as an argument as this does not need to be localized -->
  Built with the <a href="https://pydata-sphinx-theme.readthedocs.io/en/stable/index.html">PyData Sphinx Theme</a> 0.16.1.
</p></div>
      
    </div>
  
</div>

  </footer>
  </body>
</html>